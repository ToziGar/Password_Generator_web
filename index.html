<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Generador de Contrase√±as ‚Äî Seguro y Divertido</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <main class="container">
      <header class="hero">
        <h1>Generador de Contrase√±as</h1>
        <p class="subtitle">Crea contrase√±as a tu gusto, comprueba su fuerza y descubre cu√°nto tardar√≠a en romperse (con frases divertidas cuando ya es pr√°cticamente imposible).</p>
      </header>

      <section class="card controls">
        <div class="row">
          <label for="length">Longitud: <span id="lengthVal">16</span></label>
          <input id="length" type="range" min="6" max="128" value="16">
        </div>

        <div class="row checkbox-row">
          <label><input id="lower" type="checkbox" checked> Min√∫sculas</label>
          <label><input id="upper" type="checkbox" checked> May√∫sculas</label>
          <label><input id="numbers" type="checkbox" checked> N√∫meros</label>
          <label><input id="symbols" type="checkbox" checked> S√≠mbolos</label>
        </div>

        <div class="row passphrase-row">
          <label><input id="passphrase" type="checkbox"> Usar frase (palabras aleatorias)</label>
          <label id="wordsLabel" class="muted">Palabras: <span id="wordsVal">4</span></label>
          <input id="words" type="range" min="3" max="8" value="4">
        </div>

        <div class="row actions">
          <button id="generate" class="btn primary">Generar</button>
          <button id="regenerate" class="btn">Regenerar</button>
          <button id="copy" class="btn">Copiar</button>
          <button id="exportBtn" class="btn">Exportar (.json cifrado)</button>
          <button id="importBtn" class="btn">Importar (.json cifrado)</button>
        </div>
        <div class="row" style="margin-top:8px;gap:8px;align-items:center">
          <label><input id="deterministic" type="checkbox"> Generador determinista (semilla)</label>
          <input id="seedInput" type="text" placeholder="Introduce semilla para reproducir" style="flex:1">
        </div>
      </section>

      <section class="card output">
        <div class="passwordBox">
          <input id="password" aria-label="Contrase√±a generada o personalizada">
        </div>

        <div class="meter">
          <div class="meter-bar" id="meterBar"></div>
        </div>
        <div class="meter-info">
          <div id="strengthLabel">Fuerza: ‚Äî</div>
          <div id="entropyLabel">Entrop√≠a: ‚Äî bits</div>
        </div>

        <div class="crack">
            <label>Estimaciones tiempo de crack:</label>
            <div class="crack-row">
              <select id="rateSelect" aria-label="Seleccionar tasa de ataque">
                <option value="1e3">Online (1e3/s)</option>
                <option value="1e6">Botnets (1e6/s)</option>
                <option value="1e10" selected>GPU cluster (1e10/s)</option>
                <option value="1e12">Super cluster (1e12/s)</option>
              </select>
              <label class="muted small">o personalizar (ej. 1e10):</label>
              <input id="customRate" type="text" value="1e10" placeholder="1e10">
            </div>
            <div id="crackEstimates">‚Äî</div>
            <div id="funny" class="funny phrase-anim" aria-live="polite"></div>
        
            <div class="row" style="margin-top:12px;align-items:center;gap:8px">
              <label><input id="useCustom" type="checkbox"> Evaluar contrase√±a manual</label>
              <input id="customPw" type="text" placeholder="Pega o escribe una contrase√±a para evaluar" style="flex:1">
              <button id="evalCustom" class="btn">Evaluar</button>
            </div>
            <div class="row" style="margin-top:8px;gap:8px;align-items:center">
              <label><input id="hibpOptIn" type="checkbox"> Comprobar brechas (HaveIBeenPwned) ‚Äî opt-in</label>
              <button id="hibpCheck" class="btn">Comprobar ahora</button>
              <label style="margin-left:8px;color:var(--muted)">Modo hardcore: <input id="hardcore" type="checkbox"></label>
            </div>
            <!-- Hidden file input for importing encrypted backups -->
            <input id="importFile" type="file" accept=".json" style="display:none">
            
            <div id="calcSource" class="muted" style="margin-top:8px">Fuente: ajustes</div>
            <div id="breakdown" style="margin-top:8px;color:var(--muted);display:none"></div>
        </div>
      </section>

      <footer class="footer">
        <small>Generado con amor üîí ¬∑ Abre <strong>index.html</strong> en tu navegador para usarlo localmente.</small>
      </footer>
    </main>

      <canvas id="confetti" aria-hidden="true"></canvas>
      <!-- Master password modal (hidden by default). Used instead of prompt() for accessibility -->
      <div id="masterModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="masterModalLabel" style="display:none">
        <div class="modal-dialog">
          <div id="masterModalLabel" class="modal-header">Contrase√±a maestra</div>
          <div class="modal-body">Introduce la contrase√±a maestra para cifrar/descifrar el backup. No se guardar√° en el navegador.</div>
          <label for="masterInput" class="visually-hidden">Contrase√±a maestra</label>
          <input id="masterInput" class="modal-input" type="password" autocomplete="new-password" placeholder="Contrase√±a maestra">
          <div class="modal-actions">
            <button id="masterCancel" class="btn">Cancelar</button>
            <button id="masterConfirm" class="btn primary">Confirmar</button>
          </div>
        </div>
      </div>
      <script src="script.js"></script>
    </body>
  </html>
